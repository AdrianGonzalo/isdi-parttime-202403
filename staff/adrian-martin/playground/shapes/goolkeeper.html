<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
         document.body.style.backgroundColor = 'LawnGreen'

        function Shape(){
            this.container = document.createElement('div')
            this.container.style.position = 'absolute'
        }

        Shape.prototype.setHeight = function(value) {
            this.container.style.height = value + 'px'
        }

        Shape.prototype.setWidth = function(value) {
            this.container.style.width = value + 'px'
        }

        Shape.prototype.setBorder = function(width, style, color) {
            if(width !== undefined){
                this.container.style.borderWidth = width + 'px'
            }
            if(style !== undefined){
                this.container.style.borderStyle = style
            }
            if(color !== undefined){
                this.container.style.borderColor = color
            }

        }

        Shape.prototype.setRotate = function(value){
            this.container.style.transform = 'rotate(' + value + 'deg)'
        }

        Shape.prototype.setRadius = function(value) {
            this.container.style.borderRadius = value + '%'
        }

        Shape.prototype.setColor = function(value) {
            this.container.style.backgroundColor = value
        }

        Shape.prototype.setX = function(value) {
            this.container.style.left = value + 'px'
        }

        Shape.prototype.setY = function(value) {
            this.container.style.top = value + 'px'
        }

        Shape.prototype.add = function(child) {
            this.container.appendChild(child.container)
        }

        var camp = new Shape
        camp.setColor('ForestGreen')
        camp.setWidth(1200)
        camp.setHeight(800)
        camp.setX(10)
        camp.setY(10)

        var line1 = new Shape()
        line1.setColor('aliceBlue')
        line1.setWidth(15)
        line1.setHeight(700)
        line1.setX(30)
        line1.setY(100)

        camp.add(line1)

        var line2 = new Shape()
        line2.setColor('aliceBlue')
        line2.setWidth(15)
        line2.setHeight(700)
        line2.setX(1150)
        line2.setY(100)

        camp.add(line2)

        var line3 = new Shape()
        line3.setColor('aliceBlue')
        line3.setWidth(1120)
        line3.setHeight(15)
        line3.setX(40)
        line3.setY(100)

        camp.add(line3)

        var line4 = new Shape()
        line4.setColor('aliceBlue')
        line4.setWidth(920)
        line4.setHeight(15)
        line4.setX(130)
        line4.setY(400)

        camp.add(line4)

        var line5 = new Shape()
        line5.setColor('aliceBlue')
        line5.setWidth(15)
        line5.setHeight(400)
        line5.setX(130)
        line5.setY(400)

        camp.add(line5)

        var line6 = new Shape()
        line6.setColor('aliceBlue')
        line6.setWidth(15)
        line6.setHeight(400)
        line6.setX(1050)
        line6.setY(400)

        camp.add(line6)

        var circlePenalty = new Shape()
        circlePenalty.setColor('aliceBlue')
        circlePenalty.setRadius(50)
        circlePenalty.setWidth(65)
        circlePenalty.setHeight(65)
        circlePenalty.setX(560)
        circlePenalty.setY(180)

        camp.add(circlePenalty)

        var gridL = new Shape()
        gridL.setColor('aliceBlue')
        gridL.setWidth(15)
        gridL.setHeight(50)
        gridL.setX(230)
        gridL.setY(750)

        camp.add(gridL)

        var gridR = new Shape()
        gridR.setColor('aliceBlue')
        gridR.setWidth(15)
        gridR.setHeight(50)
        gridR.setX(950)
        gridR.setY(750)

        camp.add(gridR)

        //Posicion de la Porteria
        var goalLeftX = 230;
        var goalRightX = 950;
        var goalY = 800;

        //Posocion Pelota
        var ballX = 572
        var ballY = 193

        //PosiciÃ³n y dimensiones del torso del jugador
        var x = 572;
        var y = 670; 
        var torsoWidth = 30;
        var torsoHeight = 50; 

        var ball = new Shape()
        ball.setColor('black')
        ball.setRadius(50)
        ball.setWidth(40)
        ball.setHeight(40)
        ball.setX(ballX)
        ball.setY(ballY)

        camp.add(ball)

        function resetBallPosition() {
            ballX = 572
            ballY = 193
            ball.setX(ballX)
            ball.setY(ballY)
        }

        function goal(){
            return ballX >= goalLeftX && ballX <= goalRightX && ballY <= goalY
        }

        function shootPenalty(){
            //Movimiento de la Pelota
            var targetX = Math.random() * (goalRightX - goalLeftX) + goalLeftX;

            //Calcular la Trayectoria
            var totalFrames = 100
            var currentFrame = 0

            var dx = (targetX - ballX) / totalFrames
            var dy = (ballY - 750) / totalFrames

            var ballInterval = setInterval(function() {
                ballX += dx;
                ballY -= dy;
                ball.setX(ballX)
                ball.setY(ballY)
                currentFrame++

                //Verificar colision Torso
                if (ballX >= x && ballX <= x + torsoWidth && ballY >= y && ballY <= y + torsoHeight) {
                    clearInterval(ballInterval);
                    resetBallPosition();
        }

                //Dedtener el Movimiento
                if(currentFrame >= totalFrames) {
                    clearInterval(ballInterval)
                    if (goal())
                        resetBallPosition();
                }

            //Intervalo entre Fotograma
            }, 20)
        }

        shootPenalty();

        var torso = new Shape()
        torso.setColor('blue')
        torso.setWidth(30)
        torso.setHeight(50)
        torso.setRadius(35)

        var torsoMadrid = new Shape()
        torsoMadrid.setColor('DarkSlateGrey')
        torsoMadrid.setWidth(30)
        torsoMadrid.setHeight(50)
        torsoMadrid.setRadius(35)
        torsoMadrid.setY(160)
        torsoMadrid.setX(630)

        camp.add(torsoMadrid)

        var headMadrid = new Shape()
        headMadrid.setColor('PeachPuff')
        headMadrid.setWidth(25)
        headMadrid.setHeight(25)
        headMadrid.setRadius(50)
        headMadrid.setY(-20)
        headMadrid.setX(2)

        torsoMadrid.add(headMadrid)

        camp.add(torso)

        var lineTorso = new Shape   
        lineTorso.setColor('red')
        lineTorso.setWidth(10)
        lineTorso.setHeight(50)
        lineTorso.setY(0)
        lineTorso.setX(10)   
        
        torso.add(lineTorso)
        
        var head = new Shape()
        head.setColor('PeachPuff')
        head.setWidth(25)
        head.setHeight(25)
        head.setRadius(50)
        head.setY(-20)
        head.setX(2)

        torso.add(head)

        //Posicion Jugador
        var x = 572
        var y = 670

        torso.setX(x)
        torso.setY(y)

        //Movimiento del Jugador
        document.onkeydown = function(event){
            if(event.key === 'ArrowLeft')
                x -= 30 
                if(x < goalLeftX + 50 && x > goalLeftX - 50){
                    shootPenalty()
                }
            else if(event.key === 'ArrowRight')
                x += 30
                if(x < goalLeftX + 50 && x > goalLeftX - 50){
                    shootPenalty()
                }
            torso.setX(x)
        }

        document.body.appendChild(camp.container)
    </script>
</body>
</html>